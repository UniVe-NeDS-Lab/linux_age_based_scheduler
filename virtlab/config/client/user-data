#cloud-config

hostname: client

password: password
chpasswd:
  expire: False
ssh_pwauth: True

package_update: true
packages:
  - nftables
  - conntrack
  - netcat-traditional
  - iperf

write_files:
  - path: /etc/hosts
    content: |
      127.0.0.1    localhost
      192.168.42.1 client
      192.168.42.2 server

runcmd:
  - systemctl daemon-reload
  - systemctl enable nftables
  - systemctl start nftables

mounts:
  - [shared, /mnt/shared, "9p", "trans=virtio,version=9p2000.L", "0", "0"]
